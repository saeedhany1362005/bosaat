<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø­ØµØ§Ù„Ø§Øª Ø§Ù„Ø¨ÙˆØ³ ğŸ’—</title>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

body {
    font-family: Cairo, sans-serif;
    background: linear-gradient(180deg,#fff,#ffe6ee);
    text-align: center;
    padding: 20px;
    transition: background .4s;
}

h1 { color:#d81b60; }

.container {
    display:flex;
    justify-content:center;
    gap:40px;
    flex-wrap:wrap;
    margin-top:40px;
}

.card {
    background:white;
    border-radius:30px;
    padding:25px;
    width:300px;
    box-shadow:0 20px 40px rgba(0,0,0,.15);
}

/* ===== Ø§Ù„Ø­ØµØ§Ù„Ø© ===== */
.bank-wrapper {
    position:relative;
    height:260px;
}

.bank {
    width:200px;
    height:170px;
    margin:50px auto 0;
    border-radius:90px 90px 60px 60px;
    background:linear-gradient(145deg,#ffd6e5,#ff9ec2);
    box-shadow:
        inset 0 8px 15px rgba(255,255,255,.6),
        inset 0 -10px 20px rgba(0,0,0,.1),
        0 20px 30px rgba(0,0,0,.15);
    position:relative;
    overflow:hidden;
}

/* ÙØªØ­Ø© */
.bank-slot {
    position:absolute;
    top:-14px;
    left:50%;
    transform:translateX(-50%);
    width:70px;
    height:10px;
    background:#444;
    border-radius:6px;
    box-shadow: inset 0 2px 4px rgba(0,0,0,.4);
}

/* Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ù…Ø­ÙÙˆØ± */
.owner {
    position:absolute;
    top:18px;
    left:50%;
    transform:translateX(-50%);
    font-size:42px;
    opacity:.85;
}

/* Ø§Ù„Ø¨ÙˆØ³Ø§Øª Ø¬ÙˆÙ‡ */
.kisses {
    position:absolute;
    inset:40px 15px 15px 15px;
}

.kiss {
    position:absolute;
    font-size:22px;
    animation:pop .3s ease;
}

@keyframes pop {
    from {transform:scale(0);opacity:0}
    to {transform:scale(1);opacity:1}
}

/* Ø¨ÙˆØ³Ø© Ù…ØªØ­Ø±ÙƒØ© */
.fly {
    position:absolute;
    font-size:28px;
    left:50%;
    transform:translateX(-50%);
    top:-40px;
    z-index:10;
    opacity:0;
}

.drop { animation:drop .9s forwards }
.up { animation:up .9s forwards }

@keyframes drop {
    0%{top:-40px;opacity:1}
    70%{top:90px;opacity:1}
    100%{top:130px;opacity:0}
}
@keyframes up {
    0%{top:130px;opacity:1}
    70%{top:10px;opacity:1}
    100%{top:-40px;opacity:0}
}

/* Ø¨Ø§Ù‚ÙŠ */
.name {font-size:22px;font-weight:bold}
.count {font-size:40px;color:#ff4081}

button {
    width:100%;
    padding:12px;
    margin-top:8px;
    border:none;
    border-radius:15px;
    font-size:16px;
    color:white;
    cursor:pointer;
}

.plus{background:#4caf50}
.minus{background:#f44336}

/* Ø§Ù‡ØªØ²Ø§Ø² */
@keyframes shake {
    0%,100%{transform:translateX(0)}
    25%{transform:translateX(-8px)}
    50%{transform:translateX(8px)}
}
.shake{animation:shake .4s}

/* Ø®Ù„ÙÙŠØ© */
#bg {
    position:fixed;
    inset:0;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:260px;
    opacity:0;
    pointer-events:none;
    transition:.4s;
}
.show{opacity:.25}
</style>
</head>

<body>

<div id="bg">ğŸ’‹</div>

<h1>ğŸ’— Ø­ØµØ§Ù„Ø§Øª Ø§Ù„Ø¨ÙˆØ³ Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©</h1>

<div class="container">

<!-- ÙˆØ²ØªÙŠ -->
<div class="card" id="card-wzty">
    <div class="bank-wrapper">
        <div class="fly" id="fly-wzty">ğŸ’‹</div>
        <div class="bank">
            <div class="bank-slot"></div>
            <div class="owner">ğŸ¦¢</div>
            <div class="kisses" id="box-wzty"></div>
        </div>
    </div>
    <div class="name">ÙˆØ²ØªÙŠ</div>
    <div class="count" id="wztyCount">0</div>
    <button class="plus" onclick="update('wzty',1)">Ø¥ÙŠØ¯Ø§Ø¹ Ø¨ÙˆØ³Ø© ğŸ’‹</button>
    <button class="minus" onclick="update('wzty',-1)">Ø³Ø­Ø¨ Ø¨ÙˆØ³Ø© ğŸ˜¢</button>
</div>

<!-- Ø³Ø¹Ø¯ÙˆØªÙŠ -->
<div class="card" id="card-sadoty">
    <div class="bank-wrapper">
        <div class="fly" id="fly-sadoty">ğŸ’‹</div>
        <div class="bank">
            <div class="bank-slot"></div>
            <div class="owner">ğŸ¦</div>
            <div class="kisses" id="box-sadoty"></div>
        </div>
    </div>
    <div class="name">Ø³Ø¹Ø¯ÙˆØªÙŠ</div>
    <div class="count" id="sadotyCount">0</div>
    <button class="plus" onclick="update('sadoty',1)">Ø¥ÙŠØ¯Ø§Ø¹ Ø¨ÙˆØ³Ø© ğŸ’‹</button>
    <button class="minus" onclick="update('sadoty',-1)">Ø³Ø­Ø¨ Ø¨ÙˆØ³Ø© ğŸ˜¢</button>
</div>

</div>

<script>
const firebaseConfig = {
  apiKey:"AIzaSyBcowW6D82xeisiKInkElpjVj53m0SuW1g",
  authDomain:"bosaat-e2b8a.firebaseapp.com",
  databaseURL:"https://bosaat-e2b8a-default-rtdb.firebaseio.com",
  projectId:"bosaat-e2b8a",
  storageBucket:"bosaat-e2b8a.appspot.com",
  messagingSenderId:"313109054443",
  appId:"1:313109054443:web:bb6d523b8e9a9595810fae"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();

db.ref("counts").on("value",s=>{
 const d=s.val()||{};
 render("wzty",d.wzty||0);
 render("sadoty",d.sadoty||0);
});

function render(p,c){
 document.getElementById(p+"Count").innerText=c;
 const box=document.getElementById("box-"+p);
 box.innerHTML="";
 for(let i=0;i<c;i++){
   const k=document.createElement("div");
   k.className="kiss";
   k.textContent="ğŸ’‹";
   k.style.left=Math.random()*80+"%";
   k.style.top=Math.random()*80+"%";
   box.appendChild(k);
 }
}

function update(p,v){
 const fly=document.getElementById("fly-"+p);
 const card=document.getElementById("card-"+p);
 const bg=document.getElementById("bg");

 db.ref("counts/"+p).transaction(c=>Math.max(0,(c||0)+v));

 fly.className="fly "+(v>0?"drop":"up");
 fly.style.opacity=1;
 setTimeout(()=>fly.className="fly",900);

 if(v>0){
   confetti({particleCount:120,spread:80});
   bg.textContent="ğŸ’‹";
   bg.classList.add("show");
 }else{
   card.classList.add("shake");
   bg.textContent="ğŸ˜¢";
   bg.classList.add("show");
   setTimeout(()=>card.classList.remove("shake"),400);
 }

 setTimeout(()=>bg.classList.remove("show"),800);
}
</script>

</body>
</html>
